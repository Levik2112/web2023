
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>


    </head>
    <body>
        <div id="keke"> </div>
        <br>
        <div id="keke2"> </div>
        <select  id="nat" style="text-transform: lowercase;"></select>
        

        <script>
             const natlist = ["AU", "BR", "CA", "CH", "DE", "DK", "ES", "FI", "FR", "GB", "IE", "IN", "IR", "MX", "NL", "NO", "NZ", "RS", "TR", "UA", "US"];
            
            const select = document.getElementById("nat");

            natlist.forEach(function(value){
                const elem = document.createElement("option");
                elem.innerHTML = value;
                elem.value = value;
                
                //console.log(elem)
                select.appendChild(elem);
            });

            
            
            

            select.addEventListener("change", function(){
                randomUser()
                //console.log("asd "+ select.value)
                //console.log("https://randomuser.me/api/?nat=GB")
            })
            function randomUser()
            {
                //+'"'+select.value+'"'
                const xhr= new XMLHttpRequest();
                xhr.onload = function()
                {
                    const valasz = JSON.parse(this.response);
                    console.log(valasz.results[0].nat)
                    //document.getElementById("keke").innerHTML = valasz.results[0].name.title+" "+valasz.results[0].name.first+" "+valasz.results[0].name.last;
                    const kep = document.createElement("img");
                    kep.src=valasz.results[0].picture.large;
                    //document.getElementById("keke").appendChild(kep)
                    document.getElementById("keke").appendChild(cardKeszit(valasz.results[0].name.title,valasz.results[0].name.first,valasz.results[0].name.last,valasz.results[0].picture.large,valasz.results[0].email,valasz.results[0].phone,valasz.results[0].login.username,valasz.results[0].nat))
                };
                xhr.open("get","https://randomuser.me/api/?nat="+select.value);
                xhr.send();
                
            }

            function cardKeszit(title,first,last,picture,email,phone,user,nat)
            {
                //title,first,last,picture,email,telephone,user
                const kartya = document.createElement("div");
                kartya.classList.add("card")
                kartya.style.width="18rem"
                const kep = document.createElement("img");
                kep.classList.add("card-img-top")
                kep.alt=""
                kep.src=picture
                kartya.appendChild(kep)

                const kartyaTest = document.createElement("div")
                kartyaTest.classList.add("card-body");
                
                const kartyaCim = document.createElement("h5")
                kartyaCim.classList.add("card-title");

                kartyaCim.innerHTML=title+" "+first+" "+last
                kartyaTest.appendChild(kartyaCim)
                kartya.appendChild(kartyaTest)

                const kartyaEmail = document.createElement("p")
                kartyaEmail.classList.add("card-text")
                kartyaEmail.innerHTML = email;
                kartyaTest.append(kartyaEmail)

                const kartyaTelo = document.createElement("p")
                kartyaTelo.classList.add("card-text")
                kartyaTelo.innerHTML = phone;
                kartyaTest.append(kartyaTelo)

                const kartyaUser = document.createElement("p")
                kartyaUser.classList.add("card-text")
                kartyaUser.innerHTML = user;
                kartyaTest.append(kartyaUser)

                const nati = document.createElement("p")
                nati.classList.add("card-text")
                nati.innerHTML = nat;
                kartyaTest.append(nati)
                



                return kartya
            }
           
                    


            /*document.getElementById("keke").animate([
            // key frames
            { color: "blue"},
            { color: "red"},
            {color: "green"},
            {color: "yellow"}
            ], {
            // sync options
            duration: 10000,
            iterations: Infinity
            });
            */
        </script>
        
    </body>
</html>